<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikTok LIVE</title>

    <meta name="description" content="A chat reader for TikTok LIVE utilizing TikTok-Live-Connector and Socket.IO to forward the data to the client. This demo project uses the unofficial TikTok API to retrieve chat comments, gifts and other events from TikTok LIVE.">
    <meta name="keywords" content="TikTok,Live,Livestream,Chat,Reader,Scraper,Tracker,tiktok.com,broadcast,api,library,node,node.js,javascript">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, maximum-scale=10.0">

    <link rel="stylesheet" href="style.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="connection.js"></script>
    <script src="app.js"></script>
    <script src="index.js"></script>
    <script>
        function generateOverlay() {
            let username = $('#uniqueIdInput').val();
            let url = `/obs.html?username=${username}&showLikes=1&showChats=1&showGifts=1&showFollows=1&showJoins=1&bgColor=rgb(24,23,28)&fontColor=rgb(227,229,235)&fontSize=1.3em`;

            if (username) {
                window.open(url, '_blank');
            } else {
                alert("Enter username");
            }
        }
    </script>
</head>

<body>
    <div class="inputFields">
        <input type="text" id="uniqueIdInput" value="@melserngl">
        <input type="button" id="connectButton" value="Conectar">
        <a href="#" onclick="generateOverlay()">Overlay URL</a>
    </div>
    <div class="themeButtons">
        <button onclick="showColorPicker('bgColor')">body color</button>
        <button onclick="showColorPicker('fontColor')">font color</button>
        <button onclick="changeTheme('theme-dark')">Tema Oscuro</button>
        <button onclick="applyTheme()">Aplicar</button>
    </div>

    <script>
        var bgColor = localStorage.getItem('bgColor') || '#ffff1f';
        var fontColor = localStorage.getItem('fontColor') || '#010000';

        applyTheme();

        function showColorPicker(type) {
            var colorPicker = document.createElement('input');
            colorPicker.type = 'color';
            colorPicker.addEventListener('change', function() {
                var color = this.value;
                if (type === 'bgColor') {
                    bgColor = color;
                } else if (type === 'fontColor') {
                    fontColor = color;
                }
            });

            colorPicker.click();
        }

        function changeTheme(theme) {
            if (theme === 'theme-dark') {
                bgColor = '#000000';
                fontColor = '#ffffff';
            }
            applyTheme(); // Aplicar los cambios de color al cambiar el tema
        }

        function applyTheme() {
            document.body.style.backgroundColor = bgColor;
            document.body.style.color = fontColor;
            localStorage.setItem('bgColor', bgColor);
            localStorage.setItem('fontColor', fontColor);
        }
    </script>

    <head>
        <script src=tmi.min.js></script>
        <script src=TTSmain.js></script>
    </head>

    <body>
        <input id="channel" type="text" placeholder="channel name goes here"></input> <input id="channel-button" value="GO" type="button"></input>
        <div id="chatbox"></div>
    </body>
    <table class="splitstatetable">
        <div id="stateText"></div>
        <div id="roomStats"></div>
    </table>

    <div class="splitchattable">
        <div class="chatcontainer">
            <h3 class="containerheader">Chats</h3>
        </div>
        <div class="giftcontainer">
            <h3 class="containerheader">Gifts</h3>
        </div>
    </div>
    <div id="overlay-container">
    </div>
    <div>
        <script>
            document.body.appendChild(voiceSelect);
        </script><audio id="audio" controls autoplay>
    <source src="" type="audio/mpeg">
</audio>

        <audio id="audio" autoplay></audio>
        <audio id="soundPlayer" src="" type="audio/mp3"></audio>
        <input id="skip-button" type="button" value="SKIP"></input>
        <button onclick="mostrarOverlay()">Mostrar Overlay</button>
        <button onclick="ocultarOverlay()">Ocultar Overlay</button>

</body>
<script>
    function mostrarOverlay() {
        const overlayContainer = document.getElementById("overlay-container");

        // Crear y configurar el iframe
        const iframeElement = document.createElement("iframe");
        iframeElement.id = "overlay-frame";
        iframeElement.src = "http://localhost:8111/overlay/";
        iframeElement.frameborder = "0";
        iframeElement.style.width = "100%";
        iframeElement.style.height = "100%";
        iframeElement.allow = "autoplay";

        // Agregar el iframe al contenedor del overlay
        overlayContainer.appendChild(iframeElement);

        // Mostrar el contenedor del overlay
        overlayContainer.style.display = "flex";
    }

    function ocultarOverlay() {
        const overlayContainer = document.getElementById("overlay-container");
        const iframeElement = document.getElementById("overlay-frame");

        // Eliminar el iframe
        overlayContainer.removeChild(iframeElement);

        // Ocultar el contenedor del overlay
        overlayContainer.style.display = "none";
    }
</script>

<body>
    <webchatgpt-custom-element-bc18c451-d94d-48bc-8a67-f46a28eefcd8 id="webchatgpt-snackbar" style="z-index: 2147483647;"></webchatgpt-custom-element-bc18c451-d94d-48bc-8a67-f46a28eefcd8>
    <div id="monica-content-root" class="monica-widget" data-darkreader-mode="dynamic" data-darkreader-scheme="dark">
        <meta name="darkreader" content="796a1b9879ee427291add6fb0d02ecf2">
    </div>
    <div id="otherside-root" style="z-index: 2147483647; position: relative;">
        <div id="hyper-main-container">
            <div id="hyper-menu-shadow-root" style="all: initial;"></div>
            <div id="assistant-shadow-root" style="all: initial;"></div>
        </div>
    </div>
</body>

<head>
    <style>
        button {
            margin-bottom: 10px;
        }
    </style>
    <script>
        // Función para añadir una palabra al filtro
        function agregarPalabra() {
            var palabra = prompt('Ingrese una palabra para filtrar:');
            if (palabra) {
                var palabrasFiltro = obtenerPalabrasFiltro();
                palabrasFiltro.push(palabra);
                guardarPalabrasFiltro(palabrasFiltro);
                mostrarPalabrasFiltro();
            }
        }

        // Función para eliminar una palabra del filtro
        function eliminarPalabra(palabra) {
            var palabrasFiltro = obtenerPalabrasFiltro();
            var indice = palabrasFiltro.indexOf(palabra);
            if (indice !== -1) {
                palabrasFiltro.splice(indice, 1);
                guardarPalabrasFiltro(palabrasFiltro);
                mostrarPalabrasFiltro();
            }
        }

        // Función para obtener las palabras de filtro almacenadas en LocalStorage
        function obtenerPalabrasFiltro() {
            var palabrasFiltro = JSON.parse(localStorage.getItem('filteredWords')) || [];
            return palabrasFiltro;
        }

        // Función para guardar las palabras de filtro en LocalStorage
        function guardarPalabrasFiltro(palabrasFiltro) {
            localStorage.setItem('filteredWords', JSON.stringify(palabrasFiltro));
        }

        // Función para mostrar las palabras de filtro en la interfaz de usuario
        function mostrarPalabrasFiltro() {
            var palabrasFiltro = obtenerPalabrasFiltro();
            var lista = document.getElementById('listaPalabras');
            lista.innerHTML = '';

            palabrasFiltro.forEach(function(palabra) {
                var item = document.createElement('li');
                item.textContent = palabra;
                var eliminarBoton = document.createElement('button');
                eliminarBoton.textContent = 'Eliminar';
                eliminarBoton.addEventListener('click', function() {
                    eliminarPalabra(palabra);
                });
                item.appendChild(eliminarBoton);
                lista.appendChild(item);
            });
        }
    </script>
</head>

<body>
    <p>filtra palabras:</p>
    <ul id="listaPalabras"></ul>
    <button onclick="agregarPalabra()">Añadir palabra</button>

    <script>
        // Mostrar las palabras de filtro cuando se carga la página
        mostrarPalabrasFiltro();
    </script>
</body>

</html>